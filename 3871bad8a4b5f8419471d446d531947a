/* ProjectName:Task ProjectVersion: 39 | OfflinePackageVersion:39 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c8a07e32"],{"51fc":function(t,e,a){},"540b":function(t,e,a){"use strict";a("6f50")},"5a03":function(t,e,a){"use strict";a("51fc")},"6f50":function(t,e,a){},a719:function(t,e,a){},abd6:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"time-limit-gj-box"},[a("div",{staticClass:"time-limit-gj",on:{touchmove:function(t){t.preventDefault()}}},[a("div",{staticClass:"gj-gift",on:{click:t.clickGiftIcon}},[a("img",{staticClass:"gj-gift-icon",attrs:{src:t.$staticHost+"/mvp_static/images/task/timeLimitGj/box.gif",alt:""}}),a("div",{staticClass:"gj-gift-btn"},[t._v(t._s(t.showTime))])])]),t.showGame?a("div",{staticClass:"gj-game",on:{touchmove:function(t){t.preventDefault()}}},[a("iframe",{ref:"gjGameIframe",staticClass:"gj-game-iframe",attrs:{src:t.gameUrl,frameborder:"0"},on:{touchmove:function(t){t.preventDefault()}}})]):t._e(),t.showRewardPop?a("GjRewardPop",{attrs:{taskData:t.currentGameTaskData,currentGame:t.currentGame},on:{close:t.checkAndShowQuitPop,getCoins:t.handleGetCoins}}):t._e(),t.showQuitPop?a("QuitPop",{attrs:{coins:t.currentGameMaxCoins,currentGame:t.currentGame,taskData:t.currentGameTaskData},on:{close:t.handleQuitCancel,quit:t.handleQuitSure}}):t._e()],1)},i=[],n=a("5530"),o=(a("99af"),a("4d90"),a("caad"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gj-reward-pop",on:{touchmove:function(t){t.preventDefault()}}},[a("div",{staticClass:"gj-reward-pop-center"},[a("div",{staticClass:"gj-reward-main"},[a("img",{staticClass:"gj-reward-close",attrs:{src:t.$staticHost+"/mvp_static/images/task/timeLimitGj/close.png",alt:""},on:{click:t.handleClose}}),a("img",{staticClass:"gj-reward-head-img",attrs:{src:t.$staticHost+"/mvp_static/images/task/timeLimitGj/pop_head.png",alt:""}}),a("div",{staticClass:"gj-reward-main-box"},[a("div",{staticClass:"gj-reward-title"},[t._v(" "+t._s(t.$t("Home.limitTimeGift_RewardTitle"))+" ")]),a("div",{staticClass:"gj-reward-coin"},[a("div",{staticClass:"coin-item",class:{"coin-item-single":t.subTask&&!t.getOtherReward}},[a("img",{staticClass:"coin-item-1",attrs:{src:t.$staticHost+"/mvp_static/images/task/timeLimitGj/coin_1.png",alt:""}}),a("div",{staticClass:"coin-item-num"},[t._v(t._s(t.taskCoins))]),t.subTask&&!t.getOtherReward?a("div",{staticClass:"coin-item-tag"},[t._v(" "+t._s(t.$t("Home.limitTimeGift_RewardSingle"))+" ")]):t._e()]),t.subTask&&t.getOtherReward?[a("img",{staticClass:"coin-item-arrow",attrs:{src:t.$staticHost+"/mvp_static/images/task/timeLimitGj/coin_arrow.png",alt:""}}),a("div",{staticClass:"coin-item"},[a("img",{staticClass:"coin-item-2",attrs:{src:t.$staticHost+"/mvp_static/images/task/timeLimitGj/coin_2.png",alt:""}}),a("div",{staticClass:"coin-item-num"},[t._v(t._s(t.allCoins))]),a("div",{staticClass:"coin-item-tag coin-item-tag-2"},[t._v(" x"+t._s(t.otherRewardTimes)+" ")])])]:t._e()],2)])]),a("div",{staticClass:"gj-reward-btm"},[t.subTask?a("div",{staticClass:"gj-reward-choose"},[a("div",{staticClass:"choose-box",class:{"choose-box-1":t.getOtherReward},on:{click:t.handleChoose}}),a("div",{staticClass:"choose-text"},[t._v(" "+t._s("hudong"===t.subTaskType?t.$t("Home.limitTimeGift_RewardHd",{time:t.hudongTime,num:t.otherRewardTimes}):t.$t("Home.limitTimeGift_RewardAd",{num:t.otherRewardTimes}))+" ")])]):t._e(),a("div",{staticClass:"gj-btm-btn",on:{click:t.handleGetCoins}},[t.getOtherReward&&t.subTaskType?a("div",{staticClass:"gj-btm-btn-icon"},["hudong"===t.subTaskType?a("img",{attrs:{src:t.$staticHost+"/mvp_static/images/task/timeLimitGj/pop_btm_game.png",alt:""}}):"ad"===t.subTaskType?a("img",{attrs:{src:t.$staticHost+"/mvp_static/images/task/timeLimitGj/pop_btm_video.png",alt:""}}):t._e()]):t._e(),a("div",{staticClass:"gj-btm-btn-text"},[t._v(" "+t._s(t.$t("Home.limitTimeGift_RewardBtn"))+" ")])])])])])}),c=[],r={name:"GjRewardPop",components:{},props:{taskData:{type:Object,default:function(){return{}}},currentGame:{type:String,default:""}},data:function(){return{getOtherReward:!0}},computed:{subTask:function(t){var e=t.taskData;return e&&null!==e&&void 0!==e&&e.sub_tasks&&(null===e||void 0===e?void 0:e.sub_tasks.length)>0?null===e||void 0===e?void 0:e.sub_tasks[0]:null},taskCoins:function(t){var e,a=t.taskData;return(null===a||void 0===a||null===(e=a.detail)||void 0===e?void 0:e.show_coin_num)||0},subTaskCoins:function(t){var e,a=t.subTask;return(null===a||void 0===a||null===(e=a.detail)||void 0===e?void 0:e.show_coin_num)||0},allCoins:function(t){var e=t.taskCoins,a=t.subTaskCoins,s=t.getOtherReward;return s?e+a:e},subTaskType:function(t){var e=t.subTask;if(!e)return"";var a=e.task_class;return"common_advert"===a?"ad":"game_advert"===a?"hudong":""},otherRewardTimes:function(t){var e=t.taskCoins,a=t.subTaskCoins;return((a+e)/e).toFixed(1)},hudongTime:function(t){var e=t.subTask;return e&&"game_advert"===e.task_class?e.coin_cfg.time:""}},watch:{},created:function(){},mounted:function(){var t;this.$stLog({params:{eventId:"show_ve",pve_cur:"/newtask/timeLimitGj/rewardPop",extras:{game:this.currentGame,task_code:this.taskData.task_code||"",sub_task_code:(null===(t=this.subTask)||void 0===t?void 0:t.task_code)||""}}})},methods:{handleChoose:function(){this.getOtherReward=!this.getOtherReward},handleClose:function(){var t;this.$stLog({params:{eventId:"click_ve",pve_cur:"/newtask/timeLimitGj/rewardPopClose",extras:{game:this.currentGame,task_code:this.taskData.task_code,sub_task_code:(null===(t=this.subTask)||void 0===t?void 0:t.task_code)||""}}}),this.$emit("close")},handleGetCoins:function(){var t,e=this.getOtherReward&&this.subTask;this.$stLog({params:{eventId:"click_ve",pve_cur:e?"/newtask/timeLimitGj/rewardPopBtnAd":"/newtask/timeLimitGj/rewardPopBtnNoAd",extras:{game:this.currentGame,task_code:this.taskData.task_code,sub_task_code:(null===(t=this.subTask)||void 0===t?void 0:t.task_code)||"",sub_task_type:this.subTaskType}}}),this.$emit("getCoins",e)}}},m=r,u=(a("b50b"),a("2877")),d=Object(u["a"])(m,o,c,!1,null,"62093d1f",null),h=d.exports,l=a("365c"),_=a("57ef"),v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"quit-pop-box"},[s("div",{staticClass:"rain-quit-container"},[s("img",{staticClass:"cry-icon",attrs:{src:t.$staticHost+"/mvp_static/images/task/redRain/cry_face.png"}}),s("div",{staticClass:"text-line1"},[t._v(" "+t._s(t.$t("Home.limitTimeGift_quitTitle",{coins:t.coins}))+" ")]),s("div",{staticClass:"btn-list"},[s("div",{on:{click:t.clickQuit}},[t._v(t._s(t.$t("Home.limitTimeGift_quitSure")))]),s("div",{staticClass:"go",on:{click:function(e){return t.clickClose("goon")}}},[t._v(" "+t._s(t.$t("Home.limitTimeGift_quitCancel"))+" ")])]),s("img",{staticClass:"close",attrs:{src:a("d991"),alt:""},on:{click:function(e){return t.clickClose("close")}}})])])},p=[],f=(a("a9e3"),{name:"RainQuitPop",props:{coins:{type:Number,default:0},currentGame:{type:String,default:""},taskData:{type:Object,default:function(){return{}}}},mounted:function(){this.$stLog({params:{eventId:"show_ve",pve_cur:"/newtask/timeLimitGj/quitPop",extras:{game:this.currentGame,task_code:this.taskData.task_code}}})},methods:{clickClose:function(){this.$stLog({params:{eventId:"click_ve",pve_cur:"/newtask/timeLimitGj/quitPopCancel",extras:{game:this.currentGame,task_code:this.taskData.task_code}}}),this.$emit("close")},clickQuit:function(){this.$stLog({params:{eventId:"click_ve",pve_cur:"/newtask/timeLimitGj/quitPopSure",extras:{game:this.currentGame,task_code:this.taskData.task_code}}}),this.$emit("quit")}}}),k=f,g=(a("5a03"),Object(u["a"])(k,v,p,!1,null,"7d1a274f",null)),w=g.exports,G={name:"TimeLimitGj",components:{GjRewardPop:h,QuitPop:w},props:{taskData:{type:Object,default:function(){return{}}},subTasks:{type:Object,default:function(){return{}}}},data:function(){return{countTime:0,current:-1,timer:null,showRewardPop:!1,showGame:!1,gameUrl:"",currentGameTaskData:null,showQuitPop:!1,currentGame:"",gameLoaded:!1}},computed:{showTime:function(){var t=this.countTime,e=Math.floor(t/60),a=t%60,s="".concat(String(e).padStart(2,"0"),":").concat(String(a).padStart(2,"0"));return s},currentGameMaxCoins:function(t){var e=t.currentGameTaskData,a=0;if(e){var s=e.detail.show_coin_num,i=e.sub_tasks;if(a+=s,i&&i.length>0){var n=i[0].detail.show_coin_num;a+=n}}return a}},watch:{"taskData.current":function(t,e){t!==e&&t!==this.current&&(this.current=-1,this.countTime=0,this.showGame=!1,this.showRewardPop=!1,this.showQuitPop=!1,this.showIconCountDown())}},created:function(){},mounted:function(){this.showIconCountDown(),window.addEventListener("message",this.handleMessage,!1),this.$stLog({params:{eventId:"show_ve",pve_cur:"/newtask/timeLimitGj/x"}})},beforeDestroy:function(){window.removeEventListener("message",this.handleMessage,!1)},methods:{handleMessage:function(t){"gameSon"===(null===t||void 0===t?void 0:t.data.from)&&this.receiveIframeMessage(t.data)},showIconCountDown:function(){if(-1!==this.current&&this.subTasks.isImmediateTask)return this.$emit("updateHomeInfo",_["kb"].TASK_FINISH),this.$emit("checkOtherAutoFn"),void this.$emit("hide");if(-1===this.current?this.current=this.taskData.current:this.current+=1,this.current>=this.taskData.coin_cfg.length)this.$emit("hide");else{var t=this.taskData.coin_cfg[this.current];this.currentGameTaskData=this.subTasks[t.task_code];var e=this.currentGameTaskData.coin_cfg;null!==e&&void 0!==e&&e.num_coin_list?this.currentGameTaskData.detail.show_coin_num=e.num_coin_list[0].coin:null!==e&&void 0!==e&&e.coin_all&&(this.currentGameTaskData.detail.show_coin_num=e.coin_all),this.countTime=t.time,0!==this.countTime?this.handleCountTime():this.countDownOver()}},handleCountTime:function(){var t=this;clearInterval(this.timer),this.timer=setInterval((function(){t.countTime>0?t.countTime-=1:(t.countDownOver(),clearInterval(t.timer))}),1e3)},countDownOver:function(){var t={pendant_lottery:"BigWheel",pendant_scratch_card:"StrachCard",pendant_coin_rain:"CoinsRain"},e=this.currentGameTaskData.task_class,a=t[e];this.currentGame=a,this.gameLoaded=!1;var s=this.$store.state.isRtl;this.gameUrl="".concat("https://shareit.hpyfeds.com","/lucklimit/index.html?game=").concat(a,"&rtl=").concat(s),this.showGame=!0},receiveIframeMessage:function(t){var e,a=t.type,s=t.data;a&&this.$stLog({params:{eventId:"show_ve",pve_cur:"/newtask/timeLimitGj/game".concat(a),extras:{game:this.currentGame,task_code:null===(e=this.currentGameTaskData)||void 0===e?void 0:e.task_code}}});if(["GameEnd","CountOver"].includes(a))this.handleGameScenseOver(a,s);else if("getGameConfig"===a){var i=this.currentGameTaskData,o=i.task_class,c=i.coin_cfg,r=c||{};if("pendant_coin_rain"===o){var m=c.coin_all,u=c.num,d=c.time;r={duration:d,dropNum:u,totalCoins:m,title:this.$t("Home.limitTimeGift_coinsRain")}}else"pendant_lottery"===o?r=Object(n["a"])(Object(n["a"])({},r),{},{title:this.$t("Home.limitTimeGift_luckySpin"),countdownTime:c.time}):"pendant_scratch_card"===o&&(r=Object(n["a"])(Object(n["a"])({},r),{},{title:this.$t("Home.limitTimeGift_luckyCard"),subTitle:this.$t("Home.limitTimeGift_scratch"),countdownTime:c.time}));this.postMessageToIframe({type:"setGameConfig",config:r})}else"GameLoaded"===a&&(this.gameLoaded=!0)},handleGameScenseOver:function(t,e){if(["UserClose","CountOver"].includes(t))this.showGame=!1,this.showRewardPop=!1,this.showQuitPop=!1,this.reportGameStatus(1),this.showIconCountDown();else if("GameEnd"===t){if(e){var a=e.coins,s=e.num;a&&(this.currentGameTaskData.detail.show_coin_num=a,this.currentGameTaskData.detail.click_coin_num=s)}this.showGame=!1,this.showRewardPop=!0}},postMessageToIframe:function(t){if(this.$refs.gjGameIframe){var e=Object(n["a"])({from:"gameFather"},t);this.$refs.gjGameIframe.contentWindow.postMessage(e,"*")}},clickGiftIcon:function(){if(this.countTime>0){var t=this.$t("Home.limitTimeGift_toast")||"The surprise is about to begin!";this.$toast(t)}else;},handleGetCoins:function(t){var e=this;this.reportGameStatus(0).then((function(a){if(a&&200===a.result_code){var s=a.data,i=s.status,n=s.coins;if(0===i&&n>0){if(e.showRewardPop=!1,t){var o,c=null===(o=e.currentGameTaskData)||void 0===o?void 0:o.sub_tasks[0];if(c.task_class===_["e"]){var r={pendant_lottery:"common_advert_pendant_lottery_v1",pendant_scratch_card:"common_advert_scratchcard_v1",pendant_coin_rain:"common_advert_coinrain_v1"},m=r[e.currentGameTaskData.task_class];c.ad_task_code=m}e.$emit("handleTaskGo",c)}else e.$emit("showGetCoinToast",n);e.$emit("updateHomeInfo",_["kb"].TASK_FINISH),e.showIconCountDown()}else e.$toast(e.$t("defaultError"))}}))},reportGameStatus:function(t){var e=this;0===t&&this.$store.commit("switchHomeLoading",!0);var a={task_code:this.currentGameTaskData.task_code,source_page_name:this.$source,origin:"index",task_report_status:t};return"pendant_coin_rain"===this.currentGameTaskData.task_class&&(a.task_extra=0===t?{coins:this.currentGameTaskData.detail.show_coin_num,count:this.currentGameTaskData.detail.click_coin_num}:{coins:0,count:0}),Object(l["c"])(a).then((function(t){return t&&200===t.result_code&&1===t.data.status&&e.$emit("updateHomeInfo",_["kb"].TASK_FINISH),e.$store.commit("switchHomeLoading",!1),t})).catch((function(t){e.$store.commit("switchHomeLoading",!1)}))},checkAndShowQuitPop:function(){return this.showQuitPop?(this.handleQuitCancel(),this.showGame&&this.postMessageToIframe({type:"resumeGame"}),!0):this.showGame?(this.gameLoaded&&(this.postMessageToIframe({type:"pauseGame"}),this.showQuitPop=!0),!0):!!this.showRewardPop&&(this.showQuitPop=!0,!0)},handleQuitCancel:function(){this.showQuitPop=!1,this.showGame&&this.postMessageToIframe({type:"resumeGame"})},handleQuitSure:function(){this.showQuitPop=!1,this.handleGameScenseOver("UserClose")},handlePageLifeCycle:function(t){this.showGame&&!this.showQuitPop?"pause"===t?this.postMessageToIframe({type:"pauseGame"}):"resume"===t&&this.postMessageToIframe({type:"resumeGame"}):this.countTime>0&&("pause"===t?clearInterval(this.timer):"resume"===t&&this.handleCountTime())}}},T=G,C=(a("540b"),Object(u["a"])(T,s,i,!1,null,"261cfb1e",null));e["default"]=C.exports},b50b:function(t,e,a){"use strict";a("a719")},d991:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAA6BAMAAAATlVcbAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAkUExURUdwTP///////////+7u7vr6+v////Ly8vHx8fHx8e/v7/Ly8oIAlL4AAAAMdFJOUwAdHxj3MQ2fmqPUkr2qq0YAAAGQSURBVDjLjZW9boMwEMdBSJlrLDLXh9QZipwn8NA2E4pQOhJFyhP0EcobdOnerTNLn67YBvuMjVtPFn9+5/N9OUn+u24NIaS5BbXdpAEAI00fAOsc9GLUk3c12MX6iAhQurIrAuyxmOUrFapNuyvbmScCOxj00VeBRlB08iWoPsyG86A6h0QbpsT6q4NaWcOsa40J3iHT6mvxMy6Xpq/frQLssfzr6aRhxt9eTmonD07VrngXg4bpWRyZ2t2Z+5Cz0PCEipGYVNSLPQ3T5Tft1hzGUn81f2m3lljMnxEq42EipWCCUKmaxCu4QaiMlk2QhDuESjW1YZ/gT4xOF04Bw0KMqIocFfiHeEYo3EdVh6XS8rBhOeRVhtHj+kaRaLDKRlKiXiTjWUhyhLoZLG1zBrJfmsphuHIGWzn6StyputZUXbxidX9yp9qZqXavU1iBO0UdzBrbZRR3WbxD492dXKOTIQlNldJMpBB82B6Ek99oUl5jk9B3ex+bwDQ2oEm/PfmB9puvBgRfjT9enND6Bc821z4mW9OUAAAAAElFTkSuQmCC"}}]);