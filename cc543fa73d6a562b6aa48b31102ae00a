/* ProjectName:Task ProjectVersion: 39 | OfflinePackageVersion:39 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c0f4139"],{"23f2":function(t,e,n){"use strict";n("3833")},3833:function(t,e,n){},"3a37":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.currentShowIcon?i("div",{staticClass:"floatview",class:{"floatview-hide":t.hideFlag}},[i("img",{staticClass:"hide-item",attrs:{src:n("8fe3")},on:{click:t.handleHide}}),i("img",{staticClass:"fv-img",attrs:{src:t.currentShowIcon.icon,alt:"",onerror:t.errorImage},on:{click:t.handleJump}})]):t._e()},o=[],c=n("5530"),r=n("53ca"),s=(n("d3b7"),n("99af"),n("e9c4"),n("ac1f"),n("5319"),n("63cb"));const a=function(t,e=100){let n=0;return function(...i){let o=+new Date;o-n>e&&(n=o,t.apply(this,i))}};var h=n("bc49"),l={INNTER_BROWSER:"innerBrowser",LOCATION:"location",OUTER_BROWSER:"outerBrowser"},f={name:"Floatview",props:{env:{type:String,default:"dev"},configKey:{type:String,default:""},config:{type:Object,default:function(){return{}}}},data:function(){return{hideFlag:!1,errorImage:'this.src = "'.concat(h,'"'),jumpList:[{icon:["http://shareit-test.hpyfeds.com/ljtest/test-jl-icon/2/1.gif","http://shareit-test.hpyfeds.com/ljtest/test-jl-icon/2/2.gif","http://shareit-test.hpyfeds.com/ljtest/test-jl-icon/2/3.gif"],url:"https://www.baidu.com",innerBrowserStyle:0},{icon:["http://shareit-test.hpyfeds.com/ljtest/test-jl-icon/2/1.gif","http://shareit-test.hpyfeds.com/ljtest/test-jl-icon/2/2.gif","http://shareit-test.hpyfeds.com/ljtest/test-jl-icon/2/3.gif"],url:"https://www.zhihu.com"}],currentShowIndex:0,currentShowIcon:null,deviceInfo:{},loginInfo:{}}},computed:{},watch:{},created:function(){this.loginInfo=Object(s["loginInfo"])(),this.deviceInfo=Object(s["deviceInfo"])(),this.configKey&&this.getConfigData()},mounted:function(){},beforeDestroy:function(){this.unlistenScroll()},methods:{getConfigData:function(){var t=this,e="production"===this.env?"https://activity-api.hpyfeds.com":"http://test-activity-api.wshareit.com",n="/activity/configuration/center/query/batch",i={keys:[this.configKey]};fetch("".concat(e).concat(n),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(t){return t.json()})).then((function(e){try{var n=e.data[t.configKey];n=n&&JSON.parse(n);var i=t.getCountry();"object"===Object(r["a"])(n)&&n[i]&&Array.isArray(n[i])&&(t.jumpList=n[i],t.handleShowIcon(),t.listenScroll())}catch(o){}})).catch((function(t){}))},getCountry:function(){var t=Object(s["locationInfo"])()||{},e=t.lCountryCode||t.sCountryCode||"";return e},handleShowIcon:function(){if(0!==this.jumpList.length){var t=this.getShowIconIndex(),e=Object(c["a"])({},this.jumpList[t]);Array.isArray(e.icon)&&(e.icon=e.icon[Math.floor(Math.random()*e.icon.length)]),this.currentShowIndex=t,this.currentShowIcon=e,this.saveShowIconIndex(),this.$stLog({params:{eventId:"show_ve",pve_cur:"/incentive-utils/floaticon/x",extras:Object(c["a"])(Object(c["a"])({},this.currentShowIcon),{},{index:this.currentShowIndex})}})}},getShowIconIndex:function(){var t=0,e=localStorage.getItem("_IU_FLOAT_ICON_".concat(this.configKey));if(e)try{var n=JSON.parse(e),i=n.date,o=n.index,c=(new Date).toDateString();c===i&&o<this.jumpList.length&&o>=0&&(t=o+1>this.jumpList.length-1?0:o+1)}catch(r){}return t},saveShowIconIndex:function(){var t=(new Date).toDateString(),e={date:t,index:this.currentShowIndex};localStorage.setItem("_IU_FLOAT_ICON_".concat(this.configKey),JSON.stringify(e))},handleJump:function(){if(this.hideFlag)this.hideFlag=!1;else{var t=this.currentShowIcon,e=t.url,n=t.jumpType,i=void 0===n?l.INNTER_BROWSER:n;if(e){this.$emit("beforeJump");var o=this.deviceInfo.GAID||"",r=this.loginInfo.user_id||"";if(e=e.replace(/{gaid}/g,o).replace(/{uid}/g,r),i&&i!==l.INNTER_BROWSER)i===l.LOCATION?window.location.href=e:i===l.OUTER_BROWSER&&Object(s["executeAppEventCollection"])({portal:"incentive-utils-float-icon",id:"incentive-utils-float-icon",feedAction:"6",param:e});else{var a=this.currentShowIcon.innerBrowserStyle,h=void 0===a?1:a;Object(s["openNewHybrid"])({portal:"incentive-utils-float-icon",url:e,webTitle:"",style:h})}this.$stLog({params:{eventId:"click_ve",pve_cur:"/incentive-utils/floaticon/x",extras:Object(c["a"])(Object(c["a"])({},this.currentShowIcon),{},{index:this.currentShowIndex})}}),this.handleShowIcon()}}},handleHide:function(){this.hideFlag=!0},listenScroll:function(){window.addEventListener("scroll",this.handleScroll)},unlistenScroll:function(){window.removeEventListener("scroll",this.handleScroll)},handleScroll:a((function(){this.hideFlag=!0}),500)}},u=f,d=(n("23f2"),n("2877")),A=Object(d["a"])(u,i,o,!1,null,"b8162e5e",null);e["default"]=A.exports},"8fe3":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAJ1BMVEVHcEwAAAAAAAAAAAAAAAAAAAAAAAAAAABlZWV8fHyRkZH19fX9/f3x0e9qAAAADXRSTlMADRYiNFJgZoWQm/H7XQETOwAAAH9JREFUeNp909EKQyEMA9Bam2Z3u///vQNhbpWleZODIG20HQ8gEwi3MxPcwSw0wBKMr3nySHoxoWNb0bEQ/Busd35O1+tZdP5efNx3UZg5qdQtKDUMlIqFQmFJqXniVRDSCIOwhSGNYS6N3o+vH7xeWb9sXZO+YH01+1K33+ENor4RbKW4RkoAAAAASUVORK5CYII="},bc49:function(t,e,n){t.exports=n.p+"img/default.008fa9fc.png"}}]);